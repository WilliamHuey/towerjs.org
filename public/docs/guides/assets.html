<header class="header subhead" id="overview"><h1>Assets</h1>

<p>Tower uses <a href="https://github.com/viatropos/tiny-require.js">tiny-require</a> a light version of <em>RequireJS</em></p>

<ul>
<li><code>require()</code> in the browser</li>
</ul>

<h2>Usage</h2>

<p>Use <em>npm</em> to install the necessary modules.</p>

<pre><code>npm install gzip knox uglify-js
</code></pre>

<h2>Compression</h2>
<nav class="subnav"><ul class="nav nav-pills"><li><a href="#pipeline">pipeline</a></li><li><a href="#helpers">helpers</a></li><li><a href="#twitter-bootstrap">twitter-bootstrap</a></li></ul></nav></header><section class="section" id="pipeline"><h1>Pipeline</h1>

<p>Tower has a built-in asset compilation and deployment pipeline.  The <code>config/assets.coffee</code> manifest defines how assets are bundled.</p>

<ul>
<li>Asset Manifest</li>
<li>Watchfile</li>
</ul>

<h2>Tasks</h2>

<pre><code>cake assets:bundle
cake assets:upload # cake assets:upload:s3
cake assets:stats
</code></pre>

<h3><code>assets:bundle</code></h3>

<p>Bundles all the assets</p>

<h2>Asset Manifest</h2>

<pre><code class="coffeescript">module.exports =
  javascripts:
    application: [
      &quot;/app/models/user&quot;
      &quot;/app/models/post&quot;
    ]
    bottom: [
      &quot;/vendor/assets/javascripts/jmd/showdown&quot;
      &quot;/vendor/assets/javascripts/jmd/jquery.markedit&quot;
    ]
    vendor: [
      &quot;/vendor/assets/javascripts/tower&quot;
      &quot;/vendor/assets/javascripts/underscore&quot;
    ]
    development: [
      &quot;/vendor/assets/javascripts/jasmine&quot;
      &quot;/vendor/assets/javascripts/faker&quot;
      &quot;/vendor/assets/javascripts/coffeekup&quot;
    ]

  stylesheets:
    base: [
      &quot;/app/assets/stylesheets/reset&quot;
      &quot;/app/assets/stylesheets/typography&quot;
    ]
    application: [
      &quot;/app/assets/stylesheets/application&quot;
    ]

try
  Tower.assetManifest = JSON.parse(require(&quot;fs&quot;).readFileSync(&quot;public/assets/manifest.json&quot;, &quot;utf-8&quot;))
catch error
  Tower.assetManifest = {}
</code></pre>

<h2>Tasks</h2>

<pre><code>cake assets:bundle
cake assets:upload
</code></pre>

<h2>Notes</h2>

<p>Node 0.6.0 has a stable zlib in its core now: <a href="http://nodejs.org/docs/v0.6.7/api/zlib.html#zlib">http://nodejs.org/docs/v0.6.7/api/zlib.html#zlib</a>.  The alternative was to use gzippo.</p>
</section><section class="section" id="helpers"><h1>Helpers</h1>

<pre><code class="coffeescript">html 5
  head
    stylesheets &quot;base&quot;
    stylesheets &quot;vendor&quot;
    stylesheets &quot;application&quot;
    stylesheets &quot;theme&quot;

    javascriptTag &quot;http://ajax.aspnetcdn.com/ajax/modernizr/modernizr-1.7-development-only.js&quot;
    javascriptTag &quot;http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js&quot;
    javascriptTag &quot;https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js&quot;

    javascripts &quot;vendor&quot;
    javascripts &quot;application&quot;

    if Tower.env == &quot;development&quot;
      javascripts &quot;development&quot;
  body
    h1 &quot;Hello World&quot;

    javascripts &quot;bottom&quot;
</code></pre>
</section><section class="section" id="twitter-bootstrap"><h1>Twitter Bootstrap</h1>
</section>