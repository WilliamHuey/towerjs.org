<header class="header subhead" id="overview"><h1>Contributing to Tower</h1>

<p>This guide is for developing Tower in a Mac OS X environment.</p>

<p>All contributions, either via master or the wiki, get credit in <a href="http://towerjs.org/contributors">Tower Contributors</a> once we get that page up.</p>

<p>Also, we will create gists named <code>Tower.js Discussion - [topic goes here]</code> until GitHub has a Google Groups replacement.  I&#39;m too much a fan of syntax highlighting to use Google Groups :)</p>
<nav class="subnav"><ul class="nav nav-pills"><li><a href="#issues">issues</a></li><li><a href="#code">code</a></li><li><a href="#documentation">documentation</a></li><li><a href="#translations">translations</a></li></ul></nav></header><section class="section" id="issues"><h1>Reporting an Issue</h1>

<h2>Bugs</h2>

<p><a href="https://github.com/viatropos/tower/issues">https://github.com/viatropos/tower/issues</a></p>

<p>Please markup your issue with GitHub&#39;s markdown code blocks:</p>

<pre><code class="bash">     info  - socket.io started
   [Mon, 23 Apr 2012 16:40:33 GMT] INFO Tower development server listening on port 3000

   node.js:201
          throw e; // process.nextTick error, or &#39;error&#39; event on first tick
  ...
</code></pre>

<p>Your code is wrapped in triple backslashes, and you can specify the language (<code>\</code>`` bash<code>,</code>``` coffeescript<code>,</code>``` javascript<code>,</code>``` ruby<code>,</code>``` html`, etc.)</p>

<h2>Features</h2>

<p>Add these to the todo wiki&#39;s <a href="https://github.com/viatropos/tower/wiki/roadmap#wiki-potential-features">Potential Features</a> section.</p>

<h2>Questions</h2>

<p><a href="http://stackoverflow.com/">http://stackoverflow.com/</a></p>

<h2>Discussion</h2>

<p><a href="https://groups.google.com/group/towerjs">https://groups.google.com/group/towerjs</a>
<a href="https://groups.google.com/group/towerjs-dev">https://groups.google.com/group/towerjs-dev</a></p>

<h2>IRC</h2>

<p>The <code>#towerjs</code> channel on irc.freenode.net.</p>

<h2>Feedback</h2>

<p>You&#39;re encouraged to help improve the quality of this guide.</p>

<p>If you see any typos or factual errors you are confident to patch, please clone the wiki and push the change yourself. That branch of Tower has public write access. Commits are still reviewed, but that happens after you&#39;ve submitted your contribution. the wiki is cross-merged with master periodically.</p>

<p>You may also find incomplete content, or stuff that is not up to date. Please do add any missing documentation for master.</p>

<p>If for whatever reason you spot something to fix but cannot patch it yourself, please open an issue.</p>

<p>And last but not least, any kind of discussion regarding Tower documentation is very welcome on the <a href="https://groups.google.com/group/towerjs">Tower Google Group</a>.</p>
</section><section class="section" id="code"><h1>Contributing to the Tower Codebase</h1>

<p>Tower&#39;s <code>master</code> branch is always a reflection of what you&#39;ll get with <code>npm install</code>.  Tower&#39;s <code>development</code> branch is the latest stuff.  So when a pull request is merged, it&#39;s first going to be merged to development and it may be a while before it&#39;s pushed to master.  Issues will be closed when code is pushed to master.</p>

<p>First setup your Tower development [[environment]].</p>

<h2>Create a dedicated branch</h2>

<pre><code>git branch development
git checkout development
</code></pre>

<p>It doesn&#39;t really matter what name you use, because this branch will only exist on your local computer and your personal repository on GitHub. It won&#39;t be part of the Tower git repository.</p>

<p>This is also optional, but it&#39;s good practice. You can also use feature branches on your main development branch.</p>

<h2>Compile the CoffeeScript Files for Tower</h2>

<p>You need design.io running (to automatically compile coffee-script files, see the <a href="https://github.com/viatropos/design.io">design.io readme</a> for info:</p>

<pre><code>design.io watch
</code></pre>

<h2>Write Your Code</h2>

<p>The code should be written Test Driven. Use mocha to execute the Tower test suite.
To run the entire test suite from the console, simply execute:</p>

<pre><code>npm test
</code></pre>

<p>That references the <code>test</code> key in <a href="https://github.com/viatropos/tower/blob/e0e3348a1d36c35b8b088434185fb3b3529cc698/package.json#L82">package.json</a>, which looks like this:</p>

<pre><code>mocha $(find test -name &quot;*Test.coffee&quot;)
</code></pre>

<p>You can customize this expression to run a subset of tests if you&#39;re developing something and don&#39;t want the clutter.</p>

<p>Example: run all &quot;article&quot; related tests</p>

<p><code>mocha $(find test -name &quot;article*Test.coffee&quot;)</code></p>

<p>See [[Browser testing]] for more info.</p>

<h2>Follow the Coding Conventions</h2>

<p>Tower follows a simple set of coding style conventions.</p>

<ul>
<li>Two spaces, no tabs.</li>
<li>No trailing whitespace. Blank lines should not have any space.</li>
<li>Prefer &amp;&amp;/|| over and/or.</li>
<li><code>a = b</code> and not <code>a=b</code>.</li>
<li>Follow the conventions you see used in the source already.  Check the <a href="https://github.com/viatropos/tower/wiki/style">style guide</a> for a few notes as well.</li>
</ul>

<h2>Commit Your Changes</h2>

<p>When you&#39;re happy with the code on your computer, you need to commit the changes to git:</p>

<pre><code>git commit -a -m &quot;Here is a commit message on what I changed in this commit&quot;
</code></pre>

<p>Please <a href="http://ariejan.net/2011/07/05/git-squash-your-latests-commits-into-one">squash your commits into a single commit</a> when appropriate. This simplifies future cherry picks, and also keeps the git log clean.</p>

<p>Before you do the final push, synchronize with upstream from @viatropos/master</p>

<pre><code>git remote add upstream git@github.com:viatropos/tower.git
git fetch upstream
git merge upstream/master
</code></pre>

<h2>Issue a Pull Request</h2>

<p>Push your code to your repository</p>

<p><code>git push</code></p>

<p>and <a href="(http://help.github.com/send-pull-requests/">issue a pull request</a>:</p>

<h2>Get Some Feedback</h2>

<p>Now you need to get other people to look at your patch, just as you&#39;ve looked at other people&#39;s patches. You can use the <code>#towerjs</code> channel on IRC freenode for this. You might also try just talking to Tower developers that you know.</p>
</section><section class="section" id="documentation"><h1>Contributing to the Tower Documentation</h1>

<p>Tower has two main sets of documentation: The guides help you to learn Tower, and the actual code API for reference.</p>

<p>You can help improve the Tower guides by making them more coherent, adding missing information, correcting factual errors, fixing typos, bringing it up to date with the latest edge Tower.</p>

<h2>Development guide</h2>

<p>Tower should also have a development guide that goes through the main structure of Tower, the APIs and how to add functionality while following the existing conventions and design/architecture.</p>

<p>The development guide should be structured according to the folder structure inside lib/tower:</p>

<ul>
<li>Application

<ul>
<li>Locale</li>
</ul></li>
<li>Client

<ul>
<li>Application</li>
<li>Controller</li>
<li>Store</li>
<li>View</li>
</ul></li>
<li>Controller</li>
<li>Http

<ul>
<li>Param</li>
<li>Route</li>
</ul></li>
<li>Middleware</li>
<li>Model

<ul>
<li>Locale</li>
<li>Relation</li>
<li>Scope</li>
<li>Validator</li>
</ul></li>
<li>Server

<ul>
<li>Application</li>
<li>Command</li>
<li>Controller</li>
<li>Generator</li>
<li>Mailer</li>
<li>Middleware</li>
<li>Store</li>
</ul></li>
<li>Store

<ul>
<li>Memory</li>
</ul></li>
<li>Support

<ul>
<li>Locale</li>
</ul></li>
<li>View

<ul>
<li>Form</li>
<li>Helpers</li>
<li>Locale</li>
</ul></li>
</ul>
</section><section class="section" id="translations"><h1>Contributing Translations</h1>

<h2>Translating the Tower Guides</h2>

<p>It&#39;s great to have people volunteer to translate the Tower Guides into their own language.</p>

<p>If you want to launch a translation, you should:</p>

<ol>
<li>Fork the Tower.js wiki</li>
<li>Add folders for your own language (for example, ./pt-BR/guides for Brazilian Portuguese)</li>
<li>Copy the source files from <code>guides</code> to your own language folder, and translate them</li>
</ol>

<h2>Current translation efforts</h2>

<ul>
<li><a href="https://towerjs.jp">Japanese</a></li>
</ul>

<p>Here&#39;s how I am going to layout <a href="http://towerjs.org:">http://towerjs.org:</a></p>

<ul>
<li>/guides (/guides/models, /guides/application, etc.)</li>
<li>/api (generated documentation)</li>
<li>/community (links to github, google group, contributors, etc.)</li>
<li>/roadmap</li>
<li>/examples (list of projects with pictures)</li>
<li>/screencasts</li>
<li>/tests (client test suite)</li>
<li>/contributors</li>
</ul>

<p>The bulk of what you&#39;d be translating would be under /guides (I might call this /docs, not 100% yet).  Currently, those files are in the wiki/docs folder when you clone the wiki. </p>

<p>We said before we were going to go with the <a href="http://towerjs.jp">http://towerjs.jp</a> domain for both the docs and the group.  My thinking then was, I didn&#39;t want to be a bottleneck for you getting your translations out there on the web.  But after further reflection, I think it would be easier and more manageable if everything <em>did</em> go through the main site at <a href="http://towerjs.org">http://towerjs.org</a>.</p>

<p>The main reason is, you and other contributors who translate Tower into different languages, shouldn&#39;t have to purchase a domain and go through the hassle of managing an application on top of all your translation work... that just creates a barrier to writing translations.  If you <em>want</em> to have your own domain and keep the app in sync with the towerjs.org repo, that&#39;s totally fine, but I think the default should only require that you just handle the markdown files you&#39;re translating.</p>

<p>Here&#39;s how we do that.</p>

<p>First, any translation should be accessible from <a href="http://towerjs.org/%7Blocale%7D">http://towerjs.org/{locale}</a>, so <a href="http://towerjs.org/ja/docs">http://towerjs.org/ja/docs</a> or <a href="http://towerjs.org/ja-JP/docs">http://towerjs.org/ja-JP/docs</a> (not sure the exact locale for Japan).  I may want to make this a subdomain (i.e. <a href="http://ja-JP.towerjs.org/docs">http://ja-JP.towerjs.org/docs</a>), but for now lets assume it will define a top-level path.</p>

<p>Second, to write the actual translations:</p>

<ol>
<li>clone the wiki (<a href="https://github.com/viatropos/tower/wiki/_access">https://github.com/viatropos/tower/wiki/_access</a>).</li>
<li>copy/paste the [relevant] wiki pages into the locale (wiki/ja-JP/docs/models.md, etc.).</li>
<li>translate those pages.</li>
<li>submit a pull request.</li>
<li>I&#39;ll update the main site.</li>
</ol>

<p>See <a href="https://github.com/viatropos/towerjs.org/blob/master/Cakefile#L102">https://github.com/viatropos/towerjs.org/blob/master/Cakefile#L102</a> for the markdown files currently being used on the main site.</p>

<p>In the end, this will work a lot like docrails where you just edit markdown files.</p>
</section>